---
lang: zh-CN
title: 4.Prismå®æˆ˜
description: csharpå­¦ä¹ ç¬”è®°
order: 40
---

## 1.ä¸‹è½½ä¾èµ–---WPF

å®‰è£…**Prism.DryIoc**

![image-20250304162129430](./img/image-20250304162129430.png)

åœ¨app.xmlæ–‡ä»¶ä¸­æ·»åŠ *xmlns:prism="http://prismlibrary.com/"*é…ç½®ï¼Œå‘é¡¹ç›®å¼•å…¥prismæ¡†æ¶ã€‚ä¿®è¯¥xamlæ–‡ä»¶å¦‚ä¸‹ï¼š

```xaml
<prism:PrismApplication x:Class="WpfPrism.App"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:local="clr-namespace:WpfPrism"
             xmlns:prism="http://prismlibrary.com/">
    <prism:PrismApplication.Resources>
         
    </prism:PrismApplication.Resources>
</prism:PrismApplication>
```

### å°†ç³»ç»ŸICOæ¢ä¸ºè‡ªå·±çš„å›¾æ ‡

![image-20250310112825087](./img/image-20250310112825087.png)

å°†é¡¹ç›®å±æ€§çš„Win32èµ„æºçš„å›¾æ ‡é€‰æ‹©è‡ªå·±çš„ICOæ–‡ä»¶ã€‚

## 2.æ³¨å†Œç•Œé¢---WPF

viewModel

```c#
namespace Daily.WPF.ViewModels
{
    class LoginPageViewModel : BindableBase, IDialogAware
    {
        private string _title = "ç™»å½•ç•Œé¢";
        public string Title
        {
            get { return _title; }
            set { SetProperty(ref _title, value); }
        }
        /// <summary>
        /// å…³é—­å¯¹è¯æ¡†å‘½ä»¤
        /// </summary>
        public DelegateCommand CloseDialogCommand { get; set; }
        /// <summary>
        /// ç¡®è®¤å¯¹è¯æ¡†å‘½ä»¤
        /// </summary>
        public DelegateCommand ConfirmDialogCommand { get; set; }
        /// <summary>
        /// å›è°ƒ
        /// </summary>
        public DialogCloseListener RequestClose { get; }

        public LoginPageViewModel()
        {
            //ç™»å½•æŒ‰é’®å‘½ä»¤
            CloseDialogCommand = new DelegateCommand(closeDialogFun);
            ConfirmDialogCommand = new DelegateCommand(confirmDialogFun);
            //æ˜¾ç¤ºæ³¨å†Œç•Œé¢å‘½ä»¤
            ShowRegInfoComm = new DelegateCommand<string>(showRge);
        }

        private void confirmDialogFun()
        {
            RequestClose.Invoke(new DialogResult(ButtonResult.OK));
        }

        private void closeDialogFun()
        {
            RequestClose.Invoke(new DialogResult(ButtonResult.No));
        }

        /// <summary>
        /// æ˜¯å¦å¯ä»¥å…³é—­å¯¹è¯æ¡†
        /// </summary>
        /// <returns></returns>
        public bool CanCloseDialog()
        {
            return true;
        }

        /// <summary>
        /// å…³é—­å¯¹è¯æ¡†å›è°ƒå‡½æ•°
        /// </summary>
        public void OnDialogClosed()
        {
            
        }

        /// <summary>
        /// æ‰“å¼€å¯¹è¯æ¡†å›è°ƒå‡½æ•°
        /// </summary>
        /// <param name="parameters">æ‰“å¼€å¯¹è¯æ¡†æ—¶ï¼Œä¸»ç•Œé¢ä¼ é€’çš„å‚æ•°</param>
        public void OnDialogOpened(IDialogParameters parameters)
        {
            
        }

        #region é€‰æ‹©é¡µé¢çš„ç´¢å¼•
        private int _SelectIndex;
        /// <summary>
        /// é€‰æ‹©é¡µé¢çš„ç´¢å¼•
        /// </summary>
        public int SelectIndex
        {
            get { return _SelectIndex; }
            set { _SelectIndex = value; RaisePropertyChanged(); }
        }

        public DelegateCommand<string> ShowRegInfoComm { get; set; }

        /// <summary>
        /// æ˜¾ç¤ºæ³¨å†Œç•Œé¢
        /// </summary>
        private void showRge(string obj)
        {
            
            SelectIndex = int.Parse(obj);
        }

        #endregion
    }
}
```

loginPage

```xaml
<UserControl x:Class="Daily.WPF.Views.LoginPage"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:Daily.WPF.Views"
             mc:Ignorable="d" 
             xmlns:md="http://materialdesigninxaml.net/winfx/xaml/themes"
             xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
             xmlns:prism="http://prismlibrary.com/"
             Height="450" Width="800">
    <prism:Dialog.WindowStyle>
        <Style TargetType="Window">
            <Setter Property="Width" Value="600"/>
            <Setter Property="Height" Value="350"/>
            <Setter Property="SizeToContent" Value="WidthAndHeight"/>
            <Setter Property="ResizeMode" Value="NoResize"/>
            <Setter Property="prism:Dialog.WindowStartupLocation" Value="CenterScreen"/>
            
        </Style>
    </prism:Dialog.WindowStyle>
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="1.5*"/>
            <ColumnDefinition/>
        </Grid.ColumnDefinitions>
        <Image Source="/Image/loginPageImg.png" Grid.Column="0" HorizontalAlignment="Center" VerticalAlignment="Center"/>

        <md:Transitioner Grid.Column="1" SelectedIndex="{Binding SelectIndex, FallbackValue=0}">
            <!--ç™»å½•å†…å®¹-->
            <md:TransitionerSlide>
                <DockPanel Margin="15" VerticalAlignment="Center">
                    <TextBlock Text="æ¬¢è¿ä½¿ç”¨" FontSize="24" FontWeight="Bold" Margin="10 5" DockPanel.Dock="Top"/>
                    <TextBox md:HintAssist.Hint="è¯·è¾“å…¥è´¦å·" DockPanel.Dock="Top" FontSize="18" Margin="5 10"/>
                    <PasswordBox md:HintAssist.Hint="è¯·è¾“å…¥å¯†ç " DockPanel.Dock="Top" FontSize="18" Margin="5 10"/>
                    <Button Content="ç™»å½•" Margin="5 10" DockPanel.Dock="Top"/>

                    <DockPanel Margin="0 5" LastChildFill="False">
                        <TextBlock Text="æ²¡æœ‰è´¦å·ï¼Ÿ" FontSize="16" Margin="5 0">
                            <i:Interaction.Triggers>
                                <i:EventTrigger EventName="MouseLeftButtonDown">
                                    <i:InvokeCommandAction Command="{Binding ShowRegInfoComm}" CommandParameter="1"/>
                                </i:EventTrigger>
                            </i:Interaction.Triggers>
                        </TextBlock>

                        <TextBlock Text="å¿˜è®°å¯†ç " FontSize="16" DockPanel.Dock="Right"/>
                    </DockPanel>
                </DockPanel>
                
            </md:TransitionerSlide>
            <!--æ³¨å†Œ-->
            <md:TransitionerSlide>
                <DockPanel Margin="5" VerticalAlignment="Center">
                    <TextBlock Text="æ³¨å†Œè´¦å·" FontSize="24" FontWeight="Bold" Margin="10 5" DockPanel.Dock="Top"/>
                    <TextBox md:HintAssist.Hint="è¯·è¾“å…¥è´¦å·" DockPanel.Dock="Top" FontSize="18" Margin="5 10"/>
                    <PasswordBox md:HintAssist.Hint="è¯·è¾“å…¥å¯†ç " DockPanel.Dock="Top" FontSize="18" Margin="5 10"/>
                    <PasswordBox md:HintAssist.Hint="è¯·å†æ¬¡è¾“å…¥å¯†ç " DockPanel.Dock="Top" FontSize="18" Margin="5 10"/>
                    <Button Content="æ³¨å†Œè´¦å·" Margin="5 10" DockPanel.Dock="Top" />
                    <Button Content="è¿”å›ç™»å½•" Margin="5 5" DockPanel.Dock="Top" 
                            Style="{StaticResource MaterialDesignOutlinedButton}"
                            Command="{Binding ShowRegInfoComm}" CommandParameter="0"
                            />
                </DockPanel>
            </md:TransitionerSlide>
        </md:Transitioner>
    </Grid>
</UserControl>
```

### å…ˆæ·»åŠ materialdesigninxamlæ‰©å±•

![image-20250310104507971](./img/image-20250310104507971.png)

appã€‚xamlä¸­æ–¹å¼•å…¥

```xaml
<prism:PrismApplication x:Class="Daily.WPF.App"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:local="clr-namespace:Daily.WPF"
             xmlns:prism="http://prismlibrary.com/"
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
             >
    <prism:PrismApplication.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <materialDesign:BundledTheme BaseTheme="Light" PrimaryColor="DeepPurple" SecondaryColor="Lime" />
                <ResourceDictionary Source="pack://application:,,,/MaterialDesignThemes.Wpf;component/Themes/MaterialDesign3.Defaults.xaml" />
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </prism:PrismApplication.Resources>
</prism:PrismApplication>
```

### ä¸åŒé¡µé¢åˆ‡æ¢

*md:Transitioner Grid.Column="1" SelectedIndex="{Binding SelectIndex, FallbackValue=0}"*

mdçš„Transitioner å±æ€§å¯ä»¥é€šè¿‡SelectedIndexæ¥å†³å®šå½“å‰æ˜¾ç¤ºå“ªä¸ªé¡µé¢ã€‚

*md:TransitionerSlide* æ¥åˆ’åˆ†ä¸åŒé¡µé¢é¡µé¢é¡ºåºä»0å¼€å§‹

### ä½¿ç”¨MDæ‰©å±•ç»™æ–‡å­—æ·»åŠ å‘½ä»¤

```xaml
<TextBlock Text="æ²¡æœ‰è´¦å·ï¼Ÿ" FontSize="16" Margin="5 0">
    <i:Interaction.Triggers>
        <i:EventTrigger EventName="MouseLeftButtonDown">
            <i:InvokeCommandAction Command="{Binding ShowRegInfoComm}" CommandParameter="1"/>
        </i:EventTrigger>
    </i:Interaction.Triggers>
</TextBlock>
```

æ­¤æ—¶ç‚¹å‡»æ–‡å­—æ—¶ï¼Œä¼šè§¦å‘ShowRegInfoCommå‘½ä»¤ã€‚

### é¡µé¢åˆ‡æ¢å®ç°

```c#
#region é€‰æ‹©é¡µé¢çš„ç´¢å¼•
private int _SelectIndex;
/// <summary>
/// é€‰æ‹©é¡µé¢çš„ç´¢å¼•
/// </summary>
public int SelectIndex
{
    get { return _SelectIndex; }
    set { _SelectIndex = value; RaisePropertyChanged(); }
}

public DelegateCommand<string> ShowRegInfoComm { get; set; }

/// <summary>
/// æ˜¾ç¤ºæ³¨å†Œç•Œé¢
/// </summary>
private void showRge(string obj)
{
    
    SelectIndex = int.Parse(obj);
}

#endregion
```

å‰ç«¯é¡µé¢ç»‘å®šSelectIndexå±æ€§ï¼Œé€šè¿‡Commå‘½ä»¤è§¦å‘å‡½æ•°æ”¹å˜SelectIndexçš„å€¼ä»è€Œå®ç°é¡µé¢åˆ‡æ¢çš„æ•ˆæœã€‚

### æ•ˆæœå±•ç¤º

![image-20250310120959931](./img/image-20250310120959931.png)

ç‚¹å‡»æ²¡æœ‰è´¦å·

![image-20250310121014998](./img/image-20250310121014998.png)

ç‚¹å‡»è¿”å›ç™»å½•æŒ‰é’®å°±å¯ä»¥è¿”å›ä¸Šä¸€ä¸ªé¡µé¢ã€‚

## 3.Passwordè‡ªå®šä¹‰æ‰©å±•å±æ€§ï¼Œå®ç°åŒå‘ç»‘å®š---WPF

```c#
namespace Daily.WPF.Extensions
{
    /// <summary>
    /// passwordBoxæ‰©å±•å±æ€§
    /// </summary>
    class PasswordBoxExt
    {


        public static string GetPwd(DependencyObject obj)
        {
            return (string)obj.GetValue(PwdProperty);
        }

        public static void SetPwd(DependencyObject obj, string value)
        {
            obj.SetValue(PwdProperty, value);
        }

        // Using a DependencyProperty as the backing store for MyProperty. 
        public static readonly DependencyProperty PwdProperty =
            DependencyProperty.RegisterAttached(
                "Pwd", typeof(string), 
                typeof(PasswordBoxExt), 
                new PropertyMetadata("", onPasswordChange));

        /// <summary>
        /// å½“PasswordBoxçš„passwordå‚æ•°ä¿®æ”¹æ—¶
        /// åŒæ­¥ä¿®æ”¹è‡ªå®šä¹‰çš„
        /// </summary>
        /// <param name="d"></param>
        /// <param name="e"></param>
        private static void onPasswordChange(DependencyObject d, DependencyPropertyChangedEventArgs e)
        {
            PasswordBox? box = d as PasswordBox;
            string newPwd = (string) e.NewValue;
            if (box != null && box.Password != newPwd)
            {
                //åˆ¤æ–­ç°åœ¨çš„å¯†ç å€¼ï¼Œæ˜¯å¦è¢«ä¿®æ”¹
                box.Password = newPwd;
            }
        }
    }

    /// <summary>
    /// passwordå˜åŒ–ï¼Œè‡ªå®šä¹‰çš„é™„åŠ å±æ€§ä¹Ÿä¼šè·Ÿç€å˜åŒ–
    /// </summary>
    public class PasswordBoxBehavior : Behavior<PasswordBox>
    {

        
        /// <summary>
        /// æ³¨å…¥äº‹ä»¶
        /// </summary>
        protected override void OnAttached()
        {
            base.OnAttached();
            AssociatedObject.PasswordChanged += OnPasswordchanged;
        }

        /// <summary>
        /// å¯†ç ä¿®æ”¹æ—¶è°ƒç”¨
        /// </summary>
        /// <param name="sender"></param>
        /// <param name="e"></param>
        /// <exception cref="NotImplementedException"></exception>
        private void OnPasswordchanged(object sender, RoutedEventArgs e)
        {
            PasswordBox? box = sender as PasswordBox;
            if (box == null) return;
            string oldPass = PasswordBoxExt.GetPwd(box);
            if (box.Password != oldPass)
            {
                PasswordBoxExt.SetPwd(box, box.Password);
            }

        }

        /// <summary>
        /// é”€æ¯äº‹ä»¶
        /// </summary>
        protected override void OnDetaching()
        {
            base.OnDetaching();
            AssociatedObject.PasswordChanged -= OnPasswordchanged;
        }
    }
}
```



é¡µé¢è°ƒç”¨

```xaml
<UserControl x:Class="Daily.WPF.Views.LoginPage"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:Daily.WPF.Views"
             mc:Ignorable="d" 
             xmlns:md="http://materialdesigninxaml.net/winfx/xaml/themes"
             xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
             xmlns:prism="http://prismlibrary.com/"
             
             xmlns:pwdBoxExt="clr-namespace:Daily.WPF.Extensions"
             
             Height="450" Width="800">
    <prism:Dialog.WindowStyle>
        <Style TargetType="Window">
            <Setter Property="Width" Value="600"/>
            <Setter Property="Height" Value="350"/>
            <Setter Property="SizeToContent" Value="WidthAndHeight"/>
            <Setter Property="ResizeMode" Value="NoResize"/>
            <Setter Property="prism:Dialog.WindowStartupLocation" Value="CenterScreen"/>
            
        </Style>
    </prism:Dialog.WindowStyle>
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="1.5*"/>
            <ColumnDefinition/>
        </Grid.ColumnDefinitions>
        <Image Source="/Image/loginPageImg.png" Grid.Column="0" HorizontalAlignment="Center" VerticalAlignment="Center"/>

        <md:Transitioner Grid.Column="1" SelectedIndex="{Binding SelectIndex, FallbackValue=0}">
            <!--ç™»å½•å†…å®¹-->
            <md:TransitionerSlide>
                <DockPanel Margin="15" VerticalAlignment="Center">
                    <TextBlock Text="æ¬¢è¿ä½¿ç”¨" FontSize="24" FontWeight="Bold" Margin="10 5" DockPanel.Dock="Top"/>
                    <TextBox md:HintAssist.Hint="è¯·è¾“å…¥è´¦å·" DockPanel.Dock="Top" FontSize="18" Margin="5 10"/>
                    <PasswordBox md:HintAssist.Hint="è¯·è¾“å…¥å¯†ç " DockPanel.Dock="Top" FontSize="18" Margin="5 10"
                                 pwdBoxExt:PasswordBoxExt.Pwd="{Binding Pwd, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                 >
                        <i:Interaction.Behaviors>
                            <pwdBoxExt:PasswordBoxBehavior/>
                        </i:Interaction.Behaviors>
                        
                    </PasswordBox>
                    <Button Content="ç™»å½•" Margin="5 10" DockPanel.Dock="Top" Command="{Binding ConfirmDialogCommand}"/>

                    <DockPanel Margin="0 5" LastChildFill="False">
                        <TextBlock Text="æ²¡æœ‰è´¦å·ï¼Ÿ" FontSize="16" Margin="5 0">
                            <i:Interaction.Triggers>
                                <i:EventTrigger EventName="MouseLeftButtonDown">
                                    <i:InvokeCommandAction Command="{Binding ShowRegInfoComm}" CommandParameter="1"/>
                                </i:EventTrigger>
                            </i:Interaction.Triggers>
                        </TextBlock>

                        <TextBlock Text="å¿˜è®°å¯†ç " FontSize="16" DockPanel.Dock="Right"/>
                    </DockPanel>
                </DockPanel>
                
            </md:TransitionerSlide>
            <!--æ³¨å†Œ-->
            <md:TransitionerSlide>
                <DockPanel Margin="5" VerticalAlignment="Center">
                    <TextBlock Text="æ³¨å†Œè´¦å·" FontSize="24" FontWeight="Bold" Margin="10 5" DockPanel.Dock="Top"/>
                    <TextBox md:HintAssist.Hint="è¯·è¾“å…¥è´¦å·" DockPanel.Dock="Top" FontSize="18" Margin="5 10"/>
                    <PasswordBox md:HintAssist.Hint="è¯·è¾“å…¥å¯†ç " DockPanel.Dock="Top" FontSize="18" Margin="5 10"/>
                    <PasswordBox md:HintAssist.Hint="è¯·å†æ¬¡è¾“å…¥å¯†ç " DockPanel.Dock="Top" FontSize="18" Margin="5 10"/>
                    <Button Content="æ³¨å†Œè´¦å·" Margin="5 10" DockPanel.Dock="Top" />
                    <Button Content="è¿”å›ç™»å½•" Margin="5 5" DockPanel.Dock="Top" 
                            Style="{StaticResource MaterialDesignOutlinedButton}"
                            Command="{Binding ShowRegInfoComm}" CommandParameter="0"
                            />
                </DockPanel>
            </md:TransitionerSlide>
        </md:Transitioner>
    </Grid>
</UserControl>
```

ä½¿ç”¨æ—¶æ˜ å…¥è‡ªå®šä¹‰çš„pwdBoxExtå³å¯ã€‚

## 4.EKæ¡†æ¶---API

### é…ç½®appsettings.xmal

å¦‚æ— è‡ªåŠ¨æç¤ºå¯ä»¥åŠ ä¸Šæ¶æ„

![image-20250310140631681](./img/image-20250310140631681.png)

*https://json.schemastore.org/appsettings.json*

### EFæ¡†æ¶é…ç½®

æ·»åŠ ä¾èµ–ï¼Œæ³¨æ„è¿æ¥æ•°æ®åº“ç±»å‹ä¸æ‰©å±•ç‰ˆæœ¬

![image-20250310141212375](./img/image-20250310141212375.png)

æ·»åŠ è¿ç§»æ‰©å±•

![image-20250310142455908](./img/image-20250310142455908.png)

### ç¼–å†™å®ä½“ç±»

```c#
namespace Daily.API.DataModel
{
    /// <summary>
    /// ç™»å½•æ—¶çš„ç”¨æˆ·æ¨¡å‹
    /// </summary>
    [Table("AccountInfo")]
    public class AccountInfo
    {
        /// <summary>
        /// è‡ªå¢ä¸»é”®
        /// </summary>
        [Key]
        public int AccountId { get; set; }
        /// <summary>
        /// è´¦å·
        /// </summary>
        public string Account { get; set; }
        /// <summary>
        /// å¯†ç 
        /// </summary>
        public string Pwd { get; set; }
    }
}
```

### æ·»åŠ æ•°æ®åº“ä¸Šä¸‹æ–‡

```c#
namespace Daily.API.DataModel
{
    /// <summary>
    /// æ•°æ®åº“ä¸Šä¸‹æ–‡
    /// </summary>
    public class DailyAppContextL:DbContext
    {
        public DailyAppContextL(DbContextOptions<DailyAppContextL> dbContext):base(dbContext) { }

        /// <summary>
        /// è´¦å·è¡¨
        /// virtual--æƒ°æ€§åŠ è½½
        /// </summary>
        public virtual DbSet<AccountInfo> AccountInfo { get; set; }

    }
}
```

æ·»åŠ é…ç½®appsettingsã€‚jsonä¸­

```json
{
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning"
    }
  },
  "AllowedHosts": "*",
  "ConnectionStrings": { "ConnStr": "server=.;uid=sa;pwd=123456;database=DailyApp;Encrypt=True;TrustServerCertificate=True;" }
}
```

Program.csä¸­æ·»åŠ æ„å»º

```c#
//æ•°æ®åº“ä¸Šä¸‹æ–‡
builder.Services.AddDbContext<DailyAppContextL>(m => m.UseSqlServer(builder.Configuration.GetConnectionString("ConnStr")));
```

### ä½¿ç”¨ç¨‹åºåŒ…ç®¡ç†æ§åˆ¶å°ç”Ÿæˆæ•°æ®åº“çš„æ•°æ®åº“ä¸æ•°æ®è¡¨

```
PM> add-migration wangfeng0309
Build started...
Build succeeded.
To undo this action, use Remove-Migration.
PM> update-database
```

![image-20250310143433108](./img/image-20250310143433108.png)

ç”Ÿæˆäº†å¯¹åº”çš„æ•°æ®åº“ä¸æ•°æ®è¡¨ã€‚

### AutoMapperåŒ…å®Œæˆæ˜ å°„

#### ä¾èµ–å¯¼å…¥

![image-20250310170359821](./img/image-20250310170359821.png)

#### é…ç½®ç±»

```c#
namespace Daily.API.AutoMappers
{
    /// <summary>
    /// å¯¹è±¡Mapperè½¬æ¢
    /// </summary>
    public class AUtoMapperSettings: Profile
    {
        public AUtoMapperSettings()
        {
            CreateMap<AccountDto, AccountInfo>().ReverseMap();
            //CreateMap<AccountInfo, AccountDto>().ReverseMap();
        }
    }
}
```

#### åœ¨Programä¸­é…ç½®

```c#

//AutoMapper
builder.Services.AddAutoMapper(typeof(AUtoMapperSettings));
```

### æ¥å£å¼€å‘

#### regæ³¨å†Œæ¥å£å¼€å‘

```c#
private readonly IMapper mapper;

public AccountController(DailyAppContextL _content, IMapper _mapper)
{
    context = _content;
     mapper = _mapper;
}

/// <summary>
/// æ³¨å†Œè´¦å·
/// </summary>
/// <param name="dto">æ¥å£ä¼ é€’è¿›æ¥çš„å‚æ•°</param>
/// <returns>-1ï¼›è´¦å·å·²å­˜åœ¨ï¼Œ1ï¼›æ³¨å†ŒæˆåŠŸï¼Œ-99ï¼›æœªçŸ¥é”™è¯¯</returns>
/// <exception cref="NullReferenceException"></exception>
[HttpPost]
public IActionResult Reg(AccountDto dto)
{
    ApiResponse responses = new ApiResponse();
    try
    {
        //1.åˆ¤æ–­è´¦å·æ˜¯å¦è¢«æ³¨å†Œ
        if (dto == null) throw new NullReferenceException();
        var dbAccount = context.AccountInfo.Where(t => t.Account == dto.Account).FirstOrDefault();
        if (dbAccount != null)
        {
            responses.code = -1;
            responses.msg = "è´¦å·å·²è¢«æ³¨å†Œ";
            return Ok(responses);
        }
        //2.æ³¨å†Œè´¦å·
        //AccountInfo info = new AccountInfo() { Account = dto.Account,Pwd = dto.Pwd};
        //dtoé€šè¿‡mapperè½¬Infoï¼Œéœ€æ³¨æ„ä¸¤ä¸ªç±»å‹çš„åç§°åº”è¯¥ç›¸åŒ
        AccountInfo info = mapper.Map<AccountInfo>(dto);
        context.AccountInfo.Add(info);
        var count =  context.SaveChanges();//ä¿å­˜ è¿”å›å—å½±å“è¡Œæ•°
        if (count == 1)
        {
            responses.code = 1;
            responses.msg = "æ³¨å†ŒæˆåŠŸï¼ï¼ï¼";
        }
        else
        {
            responses.code = -99;
            responses.msg = "æœåŠ¡å™¨å¿™ç¢Œï¼Œè¯·é‡è¯•....";
        }

    }
    catch (Exception)
    {

        responses.code = -99;
        responses.msg = "æœåŠ¡å™¨å¿™ç¢Œï¼Œè¯·é‡è¯•....";
    }


    return Ok(responses);
}
```

#### ç™»å½•æ¥å£å¼€å‘

```C#
/// <summary>
/// ç™»å½•
/// </summary>
/// <param name="account">è´¦å·</param>
/// <param name="pwd">å¯†ç </param>
/// <returns></returns>
[HttpGet]
public IActionResult Login(string account,string pwd)
{
    ApiResponse response = new ApiResponse();
    try
    {
        var dbAccount = context.AccountInfo.Where(t => t.Account == account && t.Pwd == pwd).FirstOrDefault();
        if (dbAccount == null)
        {
            response.code = -1;
            response.msg = "è´¦å·æˆ–å¯†ç é”™è¯¯";
            return Ok(response);
        }

        response.code = 1;
        response.msg = "ç™»å½•æˆåŠŸ";
        response.resultData = dbAccount;

        return Ok(response);
    }
    catch (Exception)
    {
        response.code = -9;
        response.msg = "æœåŠ¡å™¨å¿™ç¢Œ,è¯·ç¨å";
        return Ok(response);
    }
}
```

## 5.WPFçš„APIè°ƒç”¨

å®‰è£…RestSharpæ‰©å±•

![image-20250311141920348](./img/image-20250311141920348.png)

æ·»åŠ JSONæ‰©å±•Newtonsoft.Json

![image-20250311142144297](./img/image-20250311142144297.png)

### å®ä½“ç±»

è¯·æ±‚

```c#
namespace Daily.WPF.HttpClients
{
    /// <summary>
    /// è¯·æ±‚çš„API
    /// </summary>
    class ApiRequest
    {
        /// <summary>
        /// è¯·æ±‚åœ°å€
        /// </summary>
        public string Route { get; set; }
        /// <summary>
        /// è¯·æ±‚çš„æ–¹æ³•
        /// </summary>
        public Method Method { get; set; }
        /// <summary>
        /// è¯·æ±‚å‚æ•°
        /// </summary>
        public object Parameter { get; set; }
        /// <summary>
        /// è¯·æ±‚å†…å®¹çš„ç±»å‹
        /// </summary>
        public string ContentType { get; set; } = "application/json";

    }
}
```



æ¥æ”¶

```c#
namespace Daily.WPF.HttpClients
{
    /// <summary>
    /// æ¥å—å‚æ•°æ¨¡å‹
    /// </summary>
    class ApiResponse
    {
        /// <summary>
        /// çŠ¶æ€ç 
        /// </summary>
        public int code { get; set; }
        /// <summary>
        /// è¿”å›ä¿¡æ¯
        /// </summary>
        public string msg { get; set; }
        /// <summary>
        /// è¿”å›ç»“æœ
        /// </summary>
        public object resultData { get; set; }
    }
}
```

### è¯·æ±‚æ–¹æ³•

```c#
namespace Daily.WPF.HttpClients
{
    /// <summary>
    /// è¯·æ±‚
    /// </summary>
    class HttpRestClient
    {
        /// <summary>
        /// å®¢æˆ·ç«¯
        /// </summary>
        private readonly RestClient restClient;
        private readonly string baseUrl = "http://localhost:38545/api/";

        public HttpRestClient()
        {
            restClient = new RestClient();
        }

        public ApiResponse PostExec(ApiRequest apiRequest)
        {
            RestRequest request = new RestRequest(apiRequest.Method);
            request.AddHeader("Content-Type", apiRequest.ContentType);

            if (apiRequest.Parameter != null) {
                //SerializeObjectå°†Objectè½¬ä¸ºJsonå­—ç¬¦ä¸²
                request.AddParameter("param", JsonConvert.SerializeObject(apiRequest.Parameter),ParameterType.RequestBody);
            }

            restClient.BaseUrl = new Uri( baseUrl + apiRequest.Route);
            var req =  restClient.Execute(request);
            if (req.StatusCode == System.Net.HttpStatusCode.OK)
            {
                //
                return JsonConvert.DeserializeObject<ApiResponse>(req.Content);
            }
            else
            {
                return new ApiResponse() { code = -99,msg = "æœåŠ¡å™¨é”™è¯¯ï¼Œè¯·ç¨å" };
            }
            
        }
    }
}
```

### ä½¿ç”¨

å®ä½“ç±»å®šä¹‰

```c#
namespace Daily.WPF.DTOS
{
    /// <summary>
    /// account dto
    /// </summary>
    class AccountInfoDto
    {
        /// <summary>
        /// è´¦å·
        /// </summary>
        public string Account { get; set; }
        /// <summary>
        /// å¯†ç 
        /// </summary>
        public string Pwd { get; set; }
        /// <summary>
        /// ç¡®è®¤å¯†ç 
        /// </summary>
        public string ConfirmPwd { get; set; }
    }
}

```

APiè°ƒç”¨

```c#
private readonly HttpRestClient httpRestClient;

//å‘å¸ƒè®¢é˜…
private readonly IEventAggregator Aggregator;
public LoginPageViewModel(HttpRestClient _httpRestClient, IEventAggregator _Aggregator)
{
    //ç™»å½•æŒ‰é’®å‘½ä»¤
    CloseDialogCommand = new DelegateCommand(closeDialogFun);
    ConfirmDialogCommand = new DelegateCommand(confirmDialogFun);
    //æ˜¾ç¤ºæ³¨å†Œç•Œé¢å‘½ä»¤
    ShowRegInfoComm = new DelegateCommand<string>(showRge);
    //æ³¨å†Œå‘½ä»¤
    regComm = new DelegateCommand(regCommFun);
    //æ³¨å†Œå®¢æˆ·ç«¯
    httpRestClient = _httpRestClient;

    AccountInfoDto = new AccountInfoDto();
    //å‘å¸ƒè®¢é˜…
    Aggregator = _Aggregator;
}

#region æ³¨å†Œç™»å½•è¯·æ±‚

public DelegateCommand regComm { get; set; }

public void regCommFun()
{
    if (string.IsNullOrEmpty(AccountInfoDto.Account) ||
        string.IsNullOrEmpty(AccountInfoDto.Pwd) ||
        string.IsNullOrEmpty(AccountInfoDto.ConfirmPwd))
    {
        //MessageBox.Show("æ³¨å†Œä¿¡æ¯ä¸å…¨");
        Aggregator.GetEvent<RegisterMsgEvent>().Publish("æ³¨å†Œä¿¡æ¯ä¸å…¨");
        return;
    }

    if (AccountInfoDto.Pwd != AccountInfoDto.ConfirmPwd) {
        //MessageBox.Show("ä¸¤æ¬¡è¾“å…¥å¯†ç ä¸åŒ");
        Aggregator.GetEvent<RegisterMsgEvent>().Publish("ä¸¤æ¬¡è¾“å…¥å¯†ç ä¸åŒ");
        return;
    }

    //APIè°ƒç”¨
    ApiRequest apiRequest = new ApiRequest();
    apiRequest.Method = RestSharp.Method.POST;
    apiRequest.Route = "Account/Reg";

    AccountInfoDto.Pwd = MD5Hepler.getMD5(AccountInfoDto.Pwd);
    AccountInfoDto.ConfirmPwd = MD5Hepler.getMD5(AccountInfoDto.ConfirmPwd);

    apiRequest.Parameter = AccountInfoDto;
    ApiResponse apiResponse = httpRestClient.PostExec(apiRequest);

    if (apiResponse.code == 1)
    {
        //MessageBox.Show(apiResponse.msg);
        Aggregator.GetEvent<RegisterMsgEvent>().Publish(apiResponse.msg);
        SelectIndex = 0;//æ³¨å†ŒæˆåŠŸï¼Œåˆ‡æ¢åˆ°ç™»å½•ç•Œé¢
    }
    else
    {
        //MessageBox.Show(apiResponse.msg);
        Aggregator.GetEvent<RegisterMsgEvent>().Publish(apiResponse.msg);
    }
}

/// <summary>
/// ç™»å½•åŠŸèƒ½
/// </summary>
private void confirmDialogFun()
{
    //å‚æ•°æ ¡éªŒ
    if (string.IsNullOrEmpty(Pwd) || string.IsNullOrEmpty(account))
    {
        //å‘å¸ƒæ¶ˆæ¯
        Aggregator.GetEvent<RegisterMsgEvent>().Publish("ç™»å½•ä¿¡æ¯ä¸å…¨");
        return;
    }

    //APIè°ƒç”¨
    ApiRequest apiRequest = new ApiRequest();
    apiRequest.Method = RestSharp.Method.GET;

    Pwd = MD5Hepler.getMD5(Pwd);
    apiRequest.Route = $"Account/Login?account={account}&pwd={Pwd}";
    ApiResponse apiResponse = httpRestClient.PostExec(apiRequest);

    if (apiResponse.code == 1)
    {
        RequestClose.Invoke(new DialogResult(ButtonResult.OK));
    }
    else
    {
        Aggregator.GetEvent<RegisterMsgEvent>().Publish(apiResponse.msg);
    }
}

/// <summary>
/// ç”¨æˆ·ä¿¡æ¯
/// </summary>
private AccountInfoDto _AccountInfoDto;

public AccountInfoDto AccountInfoDto
{
    get { return _AccountInfoDto; }
    set { _AccountInfoDto = value; }
}


#endregion
```

ç™»å½•ç•Œé¢å‰ç«¯

```xaml
<UserControl x:Class="Daily.WPF.Views.LoginPage"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:Daily.WPF.Views"
             mc:Ignorable="d" 
             xmlns:md="http://materialdesigninxaml.net/winfx/xaml/themes"
             xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
             xmlns:prism="http://prismlibrary.com/"
             
             xmlns:pwdBoxExt="clr-namespace:Daily.WPF.Extensions" 
             Height="450" Width="800">
    <prism:Dialog.WindowStyle>
        <Style TargetType="Window">
            <Setter Property="Width" Value="600"/>
            <Setter Property="Height" Value="350"/>
            <Setter Property="SizeToContent" Value="WidthAndHeight"/>
            <Setter Property="ResizeMode" Value="NoResize"/>
            <Setter Property="prism:Dialog.WindowStartupLocation" Value="CenterScreen"/>
            
        </Style>
    </prism:Dialog.WindowStyle>
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="1.5*"/>
            <ColumnDefinition/>
        </Grid.ColumnDefinitions>
        <!--æ˜¾ç¤ºé”™è¯¯æç¤º-->
        <md:Snackbar x:Name="regLoginBar" Grid.ColumnSpan="2" MessageQueue="{md:MessageQueue}"></md:Snackbar>
        
        <Image Source="/Image/loginPageImg.png" Margin="0 50 0 50" Grid.Column="0" HorizontalAlignment="Center" VerticalAlignment="Center"/>

        <md:Transitioner Grid.Column="1" SelectedIndex="{Binding SelectIndex, FallbackValue=0}">
            <!--ç™»å½•å†…å®¹-->
            <md:TransitionerSlide>
                <DockPanel Margin="15" VerticalAlignment="Center">
                    <TextBlock Text="æ¬¢è¿ä½¿ç”¨" FontSize="24" FontWeight="Bold" Margin="10 5" DockPanel.Dock="Top"/>
                    <TextBox md:HintAssist.Hint="è¯·è¾“å…¥è´¦å·" DockPanel.Dock="Top" FontSize="18" Margin="5 10" Text="{Binding account}"/>
                    <PasswordBox md:HintAssist.Hint="è¯·è¾“å…¥å¯†ç " DockPanel.Dock="Top" FontSize="18" Margin="5 10"
                                 pwdBoxExt:PasswordBoxExt.Pwd="{Binding Pwd, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                        <i:Interaction.Behaviors>
                            <pwdBoxExt:PasswordBoxBehavior/>
                        </i:Interaction.Behaviors>
                    </PasswordBox>
                    <Button Content="ç™»å½•" Margin="5 10" DockPanel.Dock="Top" Command="{Binding ConfirmDialogCommand}"/>
                    <Button Content="ç™»å½•ä¸è”ç½‘" Margin="5 10" DockPanel.Dock="Top" Command="{Binding CloseDialogCommand}"/>
                    <DockPanel Margin="0 5" LastChildFill="False">
                        <TextBlock Text="æ²¡æœ‰è´¦å·ï¼Ÿ" FontSize="16" Margin="5 0">
                            <i:Interaction.Triggers>
                                <i:EventTrigger EventName="MouseLeftButtonDown">
                                    <i:InvokeCommandAction Command="{Binding ShowRegInfoComm}" CommandParameter="1"/>
                                </i:EventTrigger>
                            </i:Interaction.Triggers>
                        </TextBlock>

                        <TextBlock Text="å¿˜è®°å¯†ç " FontSize="16" DockPanel.Dock="Right"/>
                    </DockPanel>
                </DockPanel>
                
            </md:TransitionerSlide>
            <!--æ³¨å†Œ-->
            <md:TransitionerSlide>
                <DockPanel Margin="5" VerticalAlignment="Center">
                    <TextBlock Text="æ³¨å†Œè´¦å·" FontSize="24" FontWeight="Bold" Margin="10 5" DockPanel.Dock="Top"/>
                    <TextBox md:HintAssist.Hint="è¯·è¾“å…¥è´¦å·" DockPanel.Dock="Top" FontSize="18" 
                             Margin="5 10" Text="{Binding AccountInfoDto.Account}"/>
                    <PasswordBox md:HintAssist.Hint="è¯·è¾“å…¥å¯†ç " DockPanel.Dock="Top" FontSize="18" Margin="5 10"
             pwdBoxExt:PasswordBoxExt.Pwd="{Binding AccountInfoDto.Pwd, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                        <i:Interaction.Behaviors>
                            <pwdBoxExt:PasswordBoxBehavior/>
                        </i:Interaction.Behaviors>
                    </PasswordBox>
                    <PasswordBox md:HintAssist.Hint="è¯·å†æ¬¡è¾“å…¥å¯†ç " DockPanel.Dock="Top" FontSize="18" Margin="5 10"
             pwdBoxExt:PasswordBoxExt.Pwd="{Binding AccountInfoDto.ConfirmPwd, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                        <i:Interaction.Behaviors>
                            <pwdBoxExt:PasswordBoxBehavior/>
                        </i:Interaction.Behaviors>
                    </PasswordBox>
                    <Button Content="æ³¨å†Œè´¦å·" Margin="5 10" DockPanel.Dock="Top" Command="{Binding regComm}"/>
                    <Button Content="è¿”å›ç™»å½•" Margin="5 5" DockPanel.Dock="Top" 
                            Style="{StaticResource MaterialDesignOutlinedButton}"
                            Command="{Binding ShowRegInfoComm}" CommandParameter="0"
                            />
                </DockPanel>
            </md:TransitionerSlide>
        </md:Transitioner>
    </Grid>
</UserControl>
```

## 6.å‘å¸ƒè®¢é˜…

### æ·»åŠ å®ä½“ç±»

```c#
namespace Daily.WPF.MsgEvent
{
    class RegisterMsgEvent: PubSubEvent<string>
    {

    }
}
```

### ä½¿ç”¨

å‘å¸ƒæ¶ˆæ¯

åœ¨ç™»å½•ä»£ç ä¸­ç›´æ¥å‘å¸ƒå°±è¡Œ

```c#
MessageBox.Show("æ³¨å†Œä¿¡æ¯ä¸å…¨");
                Aggregator.GetEvent<RegisterMsgEvent>().Publish("æ³¨å†Œä¿¡æ¯ä¸å…¨");
```

è®¢é˜…ï¼šåœ¨å‰ç«¯ç›´æ¥è°ƒç”¨å°±è¡Œ

```xaml
<!--æ˜¾ç¤ºé”™è¯¯æç¤º-->
<md:Snackbar x:Name="regLoginBar" Grid.ColumnSpan="2" MessageQueue="{md:MessageQueue}"></md:Snackbar>
```

## 7.ä¸»ç•Œé¢å¼€å‘

### ä¸»ç•Œé¢æ¡†æ¶

![image-20250311143343322](./img/image-20250311143343322.png)

é¡¹ç›®åœ°å€

[MaterialDesignlnXamlToolkit]: https://github.com/MaterialDesignInXAML/MaterialDesignInXamlToolkit

é¡¹ç›®åç«¯ä»£ç 

```c#
namespace Daily.WPF.Views
{
    /// <summary>
    /// MainWindow.xaml çš„äº¤äº’é€»è¾‘
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
        }
        /// <summary>
        /// æœ€å°åŒ–
        /// </summary>
        /// <param name="sender"></param>
        /// <param name="e"></param>
        public void bntMinClick(object sender, RoutedEventArgs e)
        {
            WindowState = WindowState.Minimized;

        }
        /// <summary>
        /// æœ€å¤§åŒ–
        /// </summary>
        /// <param name="sender"></param>
        /// <param name="e"></param>
        public void bntMaxClick(object sender, RoutedEventArgs e) {
        if (WindowState == WindowState.Maximized)
            {
                WindowState = WindowState.Normal;
            }
            else
            {
                WindowState = WindowState.Maximized;
            }
        
        }
        /// <summary>
        /// å…³é—­
        /// </summary>
        /// <param name="sender"></param>
        /// <param name="e"></param>
        public void bntCloseClick(object sender, RoutedEventArgs e) {
            Environment.Exit(0);
        }

        private void ColorZone_MouseDoubleClick(object sender, System.Windows.Input.MouseButtonEventArgs e)
        {
            if (WindowState == WindowState.Maximized)
            {
                WindowState = WindowState.Normal;
            }
            else
            {
                WindowState = WindowState.Maximized;
            }

        }
    }
    
}
```

é¡¹ç›®å‰ç«¯ä»£ç 

```xaml
<Window x:Class="Daily.WPF.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:Daily.WPF.Views"
        mc:Ignorable="d"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"

        Title="MainWindow" Height="700" Width="1200"
        
        
        WindowStartupLocation="CenterScreen"  >
    <WindowChrome.WindowChrome>
        <WindowChrome GlassFrameThickness="-1"/>
    </WindowChrome.WindowChrome>
    <materialDesign:DialogHost DialogTheme="Inherit"
                           Identifier="RootDialog"
                           SnackbarMessageQueue="{Binding ElementName=MainSnackbar, Path=MessageQueue}">

        <materialDesign:DrawerHost IsLeftDrawerOpen="{Binding ElementName=MenuToggleButton, Path=IsChecked}">
            <!--å·¦ä¾§èœå•-->
            <materialDesign:DrawerHost.LeftDrawerContent>
                
                <DockPanel MinWidth="220">
                    
                </DockPanel>
            </materialDesign:DrawerHost.LeftDrawerContent>

            <!--å¤´éƒ¨èœå•-->
            <DockPanel>
                <materialDesign:ColorZone Padding="16"
                                          MouseDoubleClick="ColorZone_MouseDoubleClick"
                                materialDesign:ElevationAssist.Elevation="Dp4"
                                DockPanel.Dock="Top"
                                Mode="PrimaryMid">
                    <DockPanel LastChildFill="True">
                        <StackPanel DockPanel.Dock="Right" Orientation="Horizontal">
                            <Image Source="/Image/user.jpg" Width="30" Height="30">
                                <!--è£å‰ª-->
                                <Image.Clip>
                                    <EllipseGeometry Center="12 12" RadiusX="12" RadiusY="12"/>
                                </Image.Clip>
                            </Image>

                            <Button x:Name="btnMin" Content="ğŸ—•" Style="{StaticResource MaterialDesignFlatMidBgButton}" Click="bntMinClick" FontSize="20"/>
                            <Button x:Name="btnMax" Content="ğŸ—–" Style="{StaticResource MaterialDesignFlatMidBgButton}" Click="bntMaxClick" FontSize="20"/>
                            <Button x:Name="btnClose" Content="ğŸ—™" Style="{StaticResource MaterialDesignFlatMidBgButton}" Click="bntCloseClick" FontSize="20"/>
                            <!--<Button x:Name="btnMin" Content="ğŸ—™"-->
                        </StackPanel>

                        <StackPanel Orientation="Horizontal" DockPanel.Dock="Left">
                            <ToggleButton x:Name="MenuToggleButton"
                          AutomationProperties.Name="HamburgerToggleButton"
                          
                          IsChecked="False"
                          Style="{StaticResource MaterialDesignHamburgerToggleButton}" />

                            <Button Margin="24,0,0,0"
                   
                    Command="{Binding MovePrevCommand}"
                    Content="{materialDesign:PackIcon Kind=ArrowLeft,
                                                      Size=24}"
                    Foreground="{Binding RelativeSource={RelativeSource AncestorType={x:Type FrameworkElement}}, Path=(TextElement.Foreground)}"
                    Style="{StaticResource MaterialDesignToolButton}"
                    ToolTip="Previous Item" />

                            <Button Margin="16,0,0,0"
                   
                    Command="{Binding MoveNextCommand}"
                    Content="{materialDesign:PackIcon Kind=ArrowRight,
                                                      Size=24}"
                    Foreground="{Binding RelativeSource={RelativeSource AncestorType={x:Type FrameworkElement}}, Path=(TextElement.Foreground)}"
                    Style="{StaticResource MaterialDesignToolButton}"
                    ToolTip="Next Item" />


                        </StackPanel>

                        <TextBlock Margin="15 0"
                     VerticalAlignment="Center"
                                   
                     AutomationProperties.Name="Material Design In XAML Toolkit"
                     FontSize="22"
                     Text="æˆ‘çš„æ—¥å¸¸" />

                        
                    </DockPanel>
                </materialDesign:ColorZone>

                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>


                    <ScrollViewer x:Name="MainScrollViewer"
                      Grid.Row="1"
                      materialDesign:ScrollViewerAssist.IsAutoHideEnabled="True"
                      HorizontalScrollBarVisibility="{Binding SelectedItem.HorizontalScrollBarVisibilityRequirement, FallbackValue=Disabled}"
                      VerticalScrollBarVisibility="{Binding SelectedItem.VerticalScrollBarVisibilityRequirement, FallbackValue=Disabled}">
                        <ContentControl Margin="{Binding MarginRequirement, FallbackValue=16}"
                          Content="{Binding Content, UpdateSourceTrigger=PropertyChanged, FallbackValue={x:Null}}"
                          DataContext="{Binding SelectedItem}"
                           />
                    </ScrollViewer>

                    <materialDesign:Snackbar x:Name="MainSnackbar"
                                 Grid.Row="1"
                                 MessageQueue="{materialDesign:MessageQueue}" />
                </Grid>
            </DockPanel>
        </materialDesign:DrawerHost>
    </materialDesign:DialogHost>
</Window>
```

æ•ˆæœ

![image-20250311143722833](./img/image-20250311143722833.png)





















