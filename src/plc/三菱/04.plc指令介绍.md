---
title: 04.plc指令介绍
order: 40
---

##  1.位指令

指令是指对PLC发出的操作命令，告诉PLC做什么、怎么做。一条完整的指令应该包含操作码和操作数，如“LDX1”、“SET YO”等，其中，“LD和SET”是操作码，“X1和YO”是操作数指令系统中可以没有操作数，如RET、END。

以下是几个常见的指令。

![image-20240321165623089](./img/image-20240321165623089.png)

###  边沿触发与置复位指令

####  脉冲与时序图

**脉冲**：在数字操作系统中，所有的信号均为开关量，即信号状态只有0和1两种状态，用触点描述就是
断开与闭合状态。

![image-20240321165909612](./img/image-20240321165909612.png)

一般称高电平为1，低电平为0.是正逻辑。反之则称为负逻辑。 

**时序图**：按时间顺序显示个对象关系的曲线示意图

![image-20240321165955208](./img/image-20240321165955208.png)

#### 边沿触发与置位复位

- **边沿触发**：就是电流发生变化时的信号。低电平到高电平时的信号为上升沿。高电平到低电平的时候为下降沿
- **置位复位**：*set*将指定地址位置变成1且一直保持。复位：*rst*将地址值变为0，保持

特殊：*zrst*连续复位，复位几个相连的地址。

![image-20240321171457506](./img/image-20240321171457506.png) 

应用分析

![image-20240321172358348](./img/image-20240321172358348.png) 

练习：

![image-20240321173818224](./img/image-20240321173818224.png) 

![image-20240321174220518](./img/image-20240321174220518.png)

### 定时器

使用定时器(T)时，用OUT指令设定定时时间。**梯形图中定时器一般只能通电（有输入信号时）计时一掉电就会被置位0，可以通过一些特定写法将定时器掉电保持**

- $$
  定时器实际定时时间(t)=K{定时器时基(T0)*设定值}
  $$

  

![image-20240321174822993](./img/image-20240321174822993.png) 

![image-20240321174836121](./img/image-20240321174836121.png)

不作为定时器时也可以当做存储数据的数据寄存器使用。

ps：累计型定时器可以掉电保持。

练习：

![image-20240321175237940](./img/image-20240321175237940.png)

![image-20240321175546532](./img/image-20240321175546532.png) 

### 计数器

使用计数器(C)时，用OUT指令设定计数值。
一般用计数器对计数条件的上升沿进行增计数，计数值与设定值相等时，计数器触点动作，用RST指令复位触点和当前值；计数器分为16位、32位计数器和高速计数器等种类，这里仅以16位正向计数器为例进行说明。

![image-20240321180042435](./img/image-20240321180042435.png) 

写法举例

![image-20240321180326675](./img/image-20240321180326675.png) 



## 2.应用指令介绍

#### 应用指令介绍

FX3U系列可编程控制器中准备了数据传送与比较、四则运算、数据循环和移位等基本应用指令，另外还有高速计数、高速脉冲输出等高速处理指令等，有些应用指令是将复杂的顺序功能封装而成的，因此使用这些指令将会使得编程工作量大大减轻；以下列出一些主要的应用指令：

![image-20240321180504296](./img/image-20240321180504296.png)

####  指令阅读方法

![image-20240321181745878](./img/image-20240321181745878.png)

###  mov指令

格式：mov [s] [d]

将传送源s的值赋值给目标d。

![image-20240321184403204](./img/image-20240321184403204.png)

**在指令实际应用中需要注意，赋值指令的触发条件尽量运用边沿触发，因为被赋值的数据寄存器存储的数值不是固定不变的，根据触发条件，寄存器的值在不同时期、不同条件下给予的值是不一样的。** 

使用

![image-20240321185729939](./img/image-20240321185729939.png)

软元件值监控

![image-20240321185937032](./img/image-20240321185937032.png)

####  bcd转换

将BIN(2进制数)转换成BCD(1O进制数)后传送的指令，PLC的运算是按照BIN(2进制)数据进行处理的，在带BCD译码的7段码显示器中显示数值时，可使用本指令。在计算机中都是2进制来保存数据，因此要把一个10进制数据转换成2进制，才能保存在计算机中，BCD码转换很好的解决了这个问题。

![image-20240321190056394](./img/image-20240321190056394.png) 

####  bin转换

将BCD(1O进制数)转换成BIN2进制数)后传送的指令，将数字式开关之类以BCD(1O进制数)设定的数值转换成PLC运算中可以处理的BIN(2进制数]数据后读取的情况下，可使用本指令。

![image-20240321190148507](./img/image-20240321190148507.png) 

####  bcd和bin命令使用

![image-20240321190434349](./img/image-20240321190434349.png) 

### 四则运算

四则运算指令：将两个软元件的值进行四则运算，得出的结果放入第三的软元件中，

常用的运算指令如下表：

![image-20240321190617820](./img/image-20240321190617820.png)　

####  加法add指令

add [s1] [s2] [d]

将s1与s2之和放入d元件中

![image-20240321190905967](./img/image-20240321190905967.png) 

####  减法sub指令

sub [s1] [s2] [d]

![image-20240321190948650](./img/image-20240321190948650.png) 

####  乘法mul

mul [s1] [s2] [d]

![image-20240321191113940](./img/image-20240321191113940.png) 

![image-20240321191128926](./img/image-20240321191128926.png) 

####  除法div

![image-20240321191328099](./img/image-20240321191328099.png) 

####  整数转换为浮点数FLT

将BIN整数值装换成2进制浮点数（实数）指令，在涉及到浮点数运算的场合，一些存放了整数数值的寄存器要参与到运算中，首先需要转换本身的数据类型，以达到与同类型数据进行运算与比较的要求。

需要注意的是，由于在各2进制浮点数（实数]运算指令中，指定的K、H的值会自动转换成2进制浮点数，所以不需要使用FLT指令进行转换

![image-20240321192340915](./img/image-20240321192340915.png) 

使用

![image-20240321193616462](./img/image-20240321193616462.png) 

###  比较指令

####  CMP指令

CMP(16位)比较两个值，将其结果（大于、等于、小于）输出给软元件。(DCMP 32位）

![image-20240321193802614](./img/image-20240321193802614.png) 

![image-20240321193811541](./img/image-20240321193811541.png) 

####  区间比较ZCP

![image-20240321194148809](./img/image-20240321194148809.png) 

####  触点·比较

触点型比较指令LD=/>/>=/</<=/<>
对两个数值进行比较，当满足相对应的条件时，触点导通，不满足则断开。

![image-20240321194628101](./img/image-20240321194628101.png) 

【解释备注】
当C0>=3,并且<=5时，Y0得电；
当C0=3,或者C0=5时，Y1得电。

###  时钟指令

PLC自带实时时钟功能，通过内置电池保持时钟数据，当电池电量耗尽，时钟数据将会丢失，因此，在运用时钟功能时需要保证电池电量充满；利用可编程控制器可以对时钟数据进行运算、比较；此外，还可以对内置实时时钟的时间进行校准。

![image-20240321195342211](./img/image-20240321195342211.png) 

####  读时钟TRD

读出plc时钟数据的·指令

![image-20240321195449903](./img/image-20240321195449903.png) 

![image-20240321195558426](./img/image-20240321195558426.png) 

####  将时分秒数据转换成秒HTOS

​	![image-20240321200101931](./img/image-20240321200101931.png) 

###  移位指令

移位的数据只能是16/32位数据

####  循环右移指令ROR

使不包括进位标志在内的指定位数部分的位信息右移、循环的指令。

ROR [d] [n]

- d要移位的元件
- 移位的位数

![image-20240321200247443](./img/image-20240321200247443.png)

移位时如果移到尾部，从高位开始重新移位。

![image-20240321200628109](./img/image-20240321200628109.png)

####  循环左移ROL

![image-20240321201852542](./img/image-20240321201852542.png) 

####  位左移SFTL

只能对16位数据操作

![image-20240321201045601](./img/image-20240321201045601.png) 

![image-20240321201540213](./img/image-20240321201540213.png) 

####  向右移位SFTR

![image-20240321201653613](./img/image-20240321201653613.png)

####  SUM指令

计算指定软元件数据有多少个为1（on）的指令

![image-20240321202138830](./img/image-20240321202138830.png)

练习 

![image-20240321201927873](./img/image-20240321201927873.png)

![image-20240321202230920](./img/image-20240321202230920.png) 

