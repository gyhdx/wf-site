---
title: 04.西门子1200运动控制
order: 40
---

# 1.V90控制

##  硬件设置

![image-20240705173511341](./img/image-20240705173511341.png)



##  TIA里组态

![image-20240705095909848](./img/image-20240705095909848.png)

![image-20240705095833202](./img/image-20240705095833202.png)

在软件组态完成需要添加伺服驱动的标准报文。一般自定义功能块时使用使用**报文3**，使用西门子提供的功能块时使用**报文111**

![image-20240705100230490](./img/image-20240705100230490.png)



### 自定义功能块与使用西门子默认功能块区别

1.自己写FB功能块

使用报文3

使用在复杂的项目

速度环、位置环、电流环（力矩模式）

组态工艺对象（1200-8工艺轴）



2.使用西门子的标准FB功能块

使用报文111

适用于功能简单的项目

速度环、位置环、电流环（力矩模式）

组态工艺对象（1200-16工艺轴）

## 参数设定

先添加伺服的轴对象

![image-20240705100330977](./img/image-20240705100330977.png)

![image-20240705100343133](./img/image-20240705100343133.png)

### 常规设置

![image-20240705100443847](./img/image-20240705100443847.png)

设定好轴的驱动器与测量单位



其中驱动器的

- PTO：该模式是通过将PLC的高速输出连接到伺服，使用发送脉冲的方式驱动电机
- PROFIdrive：plc通过profileNet连接到伺服，通过网络来发送命令驱动电机

#### pto模式需要设置的参数

![image-20240705101042301](./img/image-20240705101042301.png)

驱动器设置

![image-20240705101154391](./img/image-20240705101154391.png)



#### PROFIdrive参数

![image-20240705101413231](./img/image-20240705101413231.png)

### 驱动器参数设定

![image-20240705101512034](./img/image-20240705101512034.png)

主要需要设置好驱动器

![image-20240705101554031](./img/image-20240705101554031.png)

此处是我们开始设置的伺服的报文。下面的数据交换在设置完驱动器后，会自动配置。

### 编码器

![image-20240705101805908](./img/image-20240705101805908.png)

编码器需要设定好编码器的连接（确定编码器的位置），与编码器的参数

编码器的参数和驱动器一样是之前设置的标准报文3

![image-20240705101954705](./img/image-20240705101954705.png)

### 位置限制

![image-20240705102017974](./img/image-20240705102017974.png)

硬限位设置好左右限位开关在plc上的输入地址。

软限位需要手动测量轴在左右限位开关间的距离后再设定。

### 动态

![image-20240705102314328](./img/image-20240705102314328.png)

这个主要调整单位保持一致。其他参数若无特殊要求，保持默认设置不变。



### 回原点

![image-20240705111511747](./img/image-20240705111511747.png)

原点设置，需要设置好归位模式，一般使用第三种，归为开关模式。

inupt，设置好原点的限位开关。

接近速度。



回原点会多次巡航，为的是使原点位置更加精确。减小误差。

# 2.常用的指令

这些命令都是以设置好的工艺轴为基础。



## mc_power使能 

![image-20240705112105190](./img/image-20240705112105190.png)

启用/禁用轴的指令。运控里最重要的指令，只有这个命令给轴使能之后才能进行后续的操作。

## MC_Reset复位

![image-20240705112348772](./img/image-20240705112348772.png)

发生故障时复位。

## MC_Home回原点

![image-20240705112456365](./img/image-20240705112456365.png)

## MC_MoveAbsolute 绝对定位

![image-20240705112551089](./img/image-20240705112551089.png)

需要设置好目标位置、和移动速度。

## MC_ReadParam 读取轴参数

![image-20240705112700159](./img/image-20240705112700159.png)

注意：需要先设置好读取参数的类型。

## MC_MoveJog Jog点动移动

![image-20240705112819377](./img/image-20240705112819377.png)

设置好正反转的命令及运动的速度。











# 3变频器

## 组态

### 添加变频器及驱动

![image-20240710102128288](./img/image-20240710102128288.png)

![image-20240710102040554](./img/image-20240710102040554.png)

## 参数设置

![image-20240710102204933](./img/image-20240710102204933-1720578125225-10.png)

### 应用等级

![image-20240710102239705](./img/image-20240710102239705.png)

是控制不同等级的变频器应用场景

### 设定值指定

![image-20240710102414341](./img/image-20240710102414341.png)

决定斜坡功能是在plc还是变频器中指定。
### 更多功能

![image-20240710102522353](./img/image-20240710102522353.png)

指定变频器的定位（指指示基本控制还是带工艺的控制）

### 指令源

![image-20240710102632432](./img/image-20240710102632432.png)

指定G20的IO配置（默认配置，通过此次的指定就可以省略在变频器手动指定的步骤）



#### 报文配置

porfinet通信选择标准报文1时

QW256：状态寄存器（启动，停止，复位）

​	正转命令：16#047F

​	反转命令：16#0C7F

​	复位命令：16#04FE

​	停止命令：16#047E

QW258：速度通道值（0-16384）

### 驱动的设置

![image-20240710102803595](./img/image-20240710102803595.png)

配置驱动的电源频率和电压

### 驱动选件

![image-20240710102842390](./img/image-20240710102842390.png)

驱动器的其他配件，没有可以不写

### 电机

![image-20240710102910603](./img/image-20240710102910603.png)

配置电机的各个参数。

### 电机抱闸

![image-20240710102946084](./img/image-20240710102946084.png)

看电机是否带抱闸装置

### 重要参数

![image-20240710103038156](./img/image-20240710103038156.png)

### 驱动功能

![image-20240710103057004](./img/image-20240710103057004.png)

## 重要

**变频器使用命令时要先复位才能启动**





