---
title: 01.c++入门
order: 1
---

##  00.编写一个简单的C++程序

每个C++程序都包含一个或多个函数（function），其中一个必须命名为**main**。操作系统通过调用main来运行C++程序。

下面是一个简单的main函数，它什么都不做，只是返回给操作系统一个值：

```c
int main()
{
    return 0;
}
```

main函数的返回类型必须为int。int类型是一种**内置类型**（built-in type），即语言自身定义的类型。

函数体是一个以左**花括号**（curly brace）开始，以右花括号结束的语句块（block of statements）。

return语句结束函数的执行。main的返回值被用来指示状态。返回值0表明成功，非0的返回值的含义由系统定义，通常用来指出错误类型。

### 编译、运行程序

编写好程序后，我们就需要编译它，这依赖于操作系统和编译器。

**程序源文件命名约定**

程序文件通常被称为源文件（source file）。它以一个后缀为结尾，告诉系统这个文件是一个C++程序，比如.cpp。



## 01.输入/输出数据

C++包含了一个全面的**标准库**（standard library）来提供IO机制（以及很多其他设施）。

**iostream**库包含两个基础类型istream和ostream，分别表示输入流和输出流。一个流就是一个字符序列，是从IO设备读出或写入IO设备的。

**标准输入输出对象**

标准库定义了4个IO对象。为了处理输入，使用名为cin的istream类型的对象。这个对象被称为**标准输入**（standard input）。对于输出，使用名为cout的ostream类型的对象。这个对象被称为**标准输出**（standard output）。另外还有其他两个ostream对象，名为cerr和clog，cerr通常用来输出警告和错误消息，因此被称为**标准错误**（standard error）。clog用来输出程序运行时的一般性消息。

系统通常将程序所运行的窗口与这些对象关联起来。因此，当读取cin，数据将从程序正在运行的窗口读入，当向cout写入数据时，将会写到同一个窗口。

### 1).数据的分类

数据有数字、字符和字符串三种类型。

- 数字：直接书写，如：100、18.52、0、9；
- 字符：用半角的单引号包含的一个符号，如：'A'、'Z'、'0'、'9'、'~'、'+'，汉字和全角的标点符号不是字符；
- 字符串：用半角的双引号包含的多个符号，如："Hello World"、"我是一只傻鸟"、"西施"、"100"、"X"。

### 2.输出数据

- std::cout可以输出各种类型的数据；
- <<操作符可以拼接多个数据项；
- std::endl也可以用于换行；
- using namespace std;指定缺省的命名空间。

示例

```c++
#include <iostream>
using namespace std;

int main() {
    std::cout << "Hello, World!" << std::endl;
    cout << "Hello, World!" << endl;
    return 0;
}
```

### **3)、输入数据**

程序输入数据的方式有多种。

- 从控制台的界面中输入（网页、PC桌面程序、APP程序）；
- 从文件中读取；
- 从数据库中读取；
- 从网络中读取。

**用std::cin输入数据**

语法：std::cin>>变量名;

注意：

- a）布尔型变量的值在计算机内部用1（true）和0（false）存储；b）程序中可以书写true和false，也可以书写1和0，其它值将强制转换成1；c）用cin输入时可以填1和0，其它值也强制转换成1；d）用cout输出时只显示1和0，不显示true和false。
- 如果输入的数据与变量的数据类型不匹配，会导致行为的不确定性。

示例：

```c++
#include <iostream>
using namespace std;

int main() {
    int age;
    string name;
    char sex;
    bool fat;
    double higher;
    cout << "input age:";
    cin >> age;
    cout << "age is:" << age << endl;

    cout << "input name:";
    cin >> name;
    cout << "name is:" << name << endl;

    cout << "input sex:";
    cin >> sex;
    cout << "sex is:" << sex << endl;

    cout << "input fat:";
    cin >> fat;
    cout << "fat is:" << fat << endl;

    cout << "input higher:";
    cin >> higher;
    cout << "higher is:" << higher << endl;

    int v1 = 0, v2 = 0;
    cout << "input v1 an v2:";
    cin >> v1 >> v2;
    cout << "v1 is :" << v1 << ", v2 is :" << v2 << endl;
    return 0;
}
```

## **02.使用变量**

变量是内存变量的简称，用于存放数据。

### **1）声明变量**

变量在使用之前要先声明。

语法：数据类型 变量名

C++常用的数据类型有五种：整数（int）、浮点数（float和double）、字符（char）、字符串（string）和布尔（bool）。

变量在声明的时候可以赋初始值。

语法：数据类型 变量名=值

示例：

```c++
#include <iostream>
using namespace std;

int main() {
    int age;
    string name;
    char sex;
    bool fat;
    double higher;
    return 0;
}
```

## 03.使用常量

常量是程序中固定不变的数据。

### **1）宏常量**

一般在main函数的上面声明，用大写命名。

语法：#define 常量名 值

### **2）const修饰的变量**

在程序的任何地方都可以声明。

语法：const 数据类型 常量名=值

### **3）常量的特点**

程序中不允许改变常量的值，否则编译的时候会报错。



示例：

```c++
#include <iostream>         // 包含头文件。

#define MONTHS 12               // 一年中的月份数。
#define PI 3.14159    // 圆周率。

using namespace std;        // 指定缺省的命名空间。

int main() {
    const int days = 7;          // 一个星期中的天数。

    cout << "一年有" << MONTHS << "个月。" << endl;
    cout << "圆周率的值是：" << PI << endl;
    cout << "一个星期有" << days << "天。\n";
}
```

## **04.标识符的命名**

### **1）C++命名规则**

C++规定给标识符（变量、常量、函数、结构体、类等）命名时，必须遵守以下规则。

- 在名称中只能使用字母字符、数字和下划线；
- 名称的第一个字符不能是数字；
- 名称区分大写字符与小写字符；
- 不能将C++关键字用作名称；
- 以下划线和大写字母打头的名称被保留给编译器及其使用的资源使用，如果违反了这一规则，会导致行为的不确定性。
- C++对名称的长度没有限制，但有些平台可能有长度限制（64字符）。

**C++提倡有一定含义的名称（望名知义）。**

### **2）C++关键字**

[关键字](https://baike.baidu.com/item/%E5%85%B3%E9%94%AE%E5%AD%97/7105697)也叫[保留字](https://baike.baidu.com/item/%E4%BF%9D%E7%95%99%E5%AD%97/7674788)，是C++预先保留的标识符。

每个C++关键字都有特殊的含义，用于声明[类型](https://baike.baidu.com/item/%E7%B1%BB%E5%9E%8B/5799843)、[对象](https://baike.baidu.com/item/%E5%AF%B9%E8%B1%A1/17158)、[函数](https://baike.baidu.com/item/%E5%87%BD%E6%95%B0/301912)、[命名空间](https://baike.baidu.com/item/%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4/2887476)等，程序中不能声明与关键字同名的[标识符](https://baike.baidu.com/item/%E6%A0%87%E8%AF%86%E7%AC%A6/7105638)。

| asm         | do            | if                | return       | typedef  |
| :---------- | :------------ | :---------------- | :----------- | :------- |
| auto        | double        | inline            | short        | typeid   |
| bool        | dynamic\_cast | int               | signed       | typename |
| break       | else          | long              | sizeof       | union    |
| case        | enum          | mutable           | static       | unsigned |
| catch       | explicit      | namespace         | static\_cast | using    |
| char        | export        | new               | struct       | virtual  |
| class       | extern        | operator          | switch       | void     |
| const       | false         | private           | template     | volatile |
| const\_cast | float         | protected         | this         | wchar\_t |
| continue    | for           | public            | throw        | while    |
| default     | friend        | register          | true         |          |
| delete      | goto          | reinterpret\_cast | try          |          |

##  05.运算符

###  **1） 算术运算**

| **运算符** |         **描述**         |
| :--------: | :----------------------: |
|   **+**    |       两个数相加。       |
|   **-**    |    一个数减另一个数。    |
|   **\***   |       两个数相乘。       |
|   **/**    |      分子除以分母。      |
|   **%**    | 取模运算，整除后的余数。 |

注意：

- 整数进行除法运算时，如果分母为0，程序将异常退出；
- 浮点数进行除法运算时，如果分母为0.0，将得到inf（infinite，无穷大）；
- 两个整数进行除法运算时，将舍去小数部分，得到一个整数；
- 整数与浮点数进行除法运算时，得到的结果是浮点数；
- 进行除法运算时，在整数前面加(float)或(double)可以将整数转换为float或double类型；
- 取模运算只能用于整数（分母也不能为0）。

### **2）自增和自减**

|  **运算符**  |              **描述**               |
| :----------: | :---------------------------------: |
| **++变量名** | 先把变量的值加1，然后再执行表达式。 |
| **变量名++** |   先执行表达式，再把变量的值加1。   |
| **--变量名** | 先把变量的值减1，然后再执行表达式。 |
| **变量名--** |    先执行表达式，再把变量的减1。    |

### **3）赋值运算**

**赋值运算**

| **运算符** |            **示例**             |                           **描述**                           |
| :--------: | :-----------------------------: | :----------------------------------------------------------: |
|   **=**    | c = a + b; 将把a + b的值赋给c。 |               把右边操作数的值赋给左边操作数。               |
|   **+=**   |    c += a; 相当于 c = c + a;    | 加且赋值运算符，把右边操作数加上左边操作数的结果赋值给左边操作数。 |
|   **-=**   |    c -= a; 相当于 c = c - a;    | 减且赋值运算符，把左边操作数减去右边操作数的结果赋值给左边操作数。 |
|  **\*=**   |   c \*= a; 相当于 c = c \* a;   | 乘且赋值运算符，把右边操作数乘以左边操作数的结果赋值给左边操作数。 |
|   **/=**   |    c /= a; 相当于 c = c / a;    | 除且赋值运算符，把左边操作数除以右边操作数的结果赋值给左边操作数。 |
|   **%=**   |    c %= a; 相当于 c = c % a;    | 求余数且赋值运算符，求两个操作数的模赋值给左边操作数，浮点数不适用取余数。 |

注意：

- 字符串（string）只能使用等号（=）赋值，不能使用其它的赋值运算符；
- 浮点数不能使用%=运算符；
- 等号（=）赋值运算符可以连续使用；
- 如果赋值运算符两边操作数的数据类型不同，C++将自动转换数据类型，可能会损失精度，也可能超出取值范围，如果转换不成功，编译时会报错。

### **4）关系运算**

用于比较两个表达式的值，运算的结果为1-true和0-false。

| **关系** | **数学的表示** | **C++的表示** |
| :------: | :------------: | :-----------: |
|   等于   |       =        |      ==       |
|  不等于  |       ≠        |      !=       |
|   小于   |       <        |       <       |
| 小于等于 |       ≤        |      <=       |
|   大于   |       >        |       >       |
| 大于等于 |       ≥        |      >=       |

注意：

- 关系运算符的两边可以是数值，也可以是表达式；
- 用std::cout输出关系运算表达式时，关系表达式要加括号；
- 关系运算也适用于字符串（string），字符串常用的关系运算是==和!=，其它的基本上不用。

### **5）逻辑运算**

根据给定的逻辑因子（表达式或值）返回一个新的逻辑因子。

| **运算符** |   **术语**   | **示例** |                  **结果**                   |
| :--------: | :----------: | :------: | :-----------------------------------------: |
|     &&     |    逻辑与    |  a&&b;   |   如果a和b都为真，则结果为真，否则为假。    |
|    \|\|    |    逻辑或    | a\|\| b  |     a,b都为假时，结果为假，否则结果为真     |
|     !      | 逻辑非（反） |   !a;    | 如果a为假，则!a为真； 如果a为真，则!a为假。 |

注意：

- 逻辑运算符的两边可以是数值，也可以是表达式；
- 用std::cout输出逻辑运算表达式时，逻辑表达式要加括号；
- 在实际开发中，逻辑运算的多重组合是重点。

### **6）逗号运算**

把一行语句中的多个表达式连接起来，程序将从左到右执行表达式。

语法：表达式一,表达式二,……,表达式n;

逗号运算常用于声明多个变量。

int a,b;           // 声明变量a和b。

int a=10,b=20;   // 声明变量a和b并初始化。

也可以用于其它语句中，但是，逗号运算符是所有运算符中级别最低的，以下两个表达式的效果是不同的。

int a,b; 

b=a=2,a\*2; 

b=(a=2,a\*2);

### **7）运算的优先级**

一个表达式可以包含多个运算符，运算符的优先级决定了表达式各部分的执行顺序。

例如，按照运算规则， \*的优先级比+高，所以的b \* c将先执行：

a + b \* c;

如果想让a + b先执行，则必须使用括号：

(a + b) \* c;

如果一个表达式中操作符的优先级相同，那么它们的**结合律**（associativity）决定了它们的执行顺序（从左到右或从右到左）。例如，算术运算的组合方式是从左到右，赋值运算则是从右到左。如下：

| **表达式** | **结合律** | **组合方式** |
| :--------: | :--------: | :----------: |
| **a/b%c**  |  从左到右  |   (a/b)%c    |
| **a=b=c**  |  从右到左  |   a=(b=c)    |

下表是全部运算符的优先级和结合律：

<table><tr><th><b>优先级</b></th><th><b>运算符</b></th><th><b>名称或含义</b></th><th><b>使用形式</b></th><th><b>结合方向</b></th></tr>
<tr><td rowspan="4">1</td><td>[]</td><td>下标</td><td>地址[表达式]</td><td rowspan="4">左到右</td></tr>
<tr><td>()</td><td>圆括号</td><td>（表达式）/函数名(形参表)</td></tr>
<tr><td>.</td><td>成员选择（对象）</td><td>对象.成员名</td></tr>
<tr><td>-></td><td>成员选择（指针）</td><td>对象指针->成员名</td></tr>
<tr><td rowspan="11">2</td><td>-</td><td>负号运算符</td><td>-表达式</td><td rowspan="11">右到左</td></tr>
<tr><td>(类型)</td><td>强制类型转换</td><td>(数据类型)表达式</td></tr>
<tr><td>++</td><td>前置自增运算符</td><td>++变量名</td></tr>
<tr><td>++</td><td>后置自增运算符</td><td>变量名++</td></tr>
<tr><td>--</td><td>前置自减运算符</td><td>--变量名</td></tr>
<tr><td>--</td><td>后置自减运算符</td><td>变量名--</td></tr>
<tr><td>*</td><td>取值运算符</td><td>*指针变量</td></tr>
<tr><td>&</td><td>取地址运算符</td><td>&变量名</td></tr>
<tr><td>!</td><td>逻辑非运算符</td><td>!表达式</td></tr>
<tr><td>~</td><td>按位取反运算符</td><td>~表达式</td></tr>
<tr><td>sizeof</td><td>长度运算符</td><td>sizeof(表达式)</td></tr>
<tr><td rowspan="3">3</td><td>/</td><td>除</td><td>表达式/表达式</td><td rowspan="3">左到右</td></tr>
<tr><td>*</td><td>乘</td><td>表达式*表达式</td></tr>
<tr><td>%</td><td>余数（取模）</td><td>整型表达式/整型表达式</td></tr>
<tr><td rowspan="2">4</td><td>+</td><td>加</td><td>表达式+表达式</td><td rowspan="2">左到右</td></tr>
<tr><td>-</td><td>减</td><td>表达式-表达式</td></tr>
<tr><td rowspan="2">5</td><td><<</td><td>左移</td><td>变量</td><td rowspan="2">左到右</td></tr>
<tr><td>>></td><td>右移</td><td>变量>>表达式</td></tr>
<tr><td rowspan="4">6</td><td>></td><td>大于</td><td>表达式>表达式</td><td rowspan="4">左到右</td></tr>
<tr><td>>=</td><td>大于等于</td><td>表达式>=表达式</td></tr>
<tr><td><</td><td>小于</td><td>表达式</td></tr>
<tr><td><=</td><td>小于等于</td><td>表达式</td></tr>
<tr><td rowspan="2">7</td><td>==</td><td>等于</td><td>表达式==表达式</td><td rowspan="2">左到右</td></tr>
<tr><td>!=</td><td>不等于</td><td>表达式!= 表达式</td></tr>
<tr><td>8</td><td>&</td><td>按位与</td><td>表达式&表达式</td><td>左到右</td></tr>
<tr><td>9</td><td>^</td><td>按位异或</td><td>表达式^表达式</td><td>左到右</td></tr>
<tr><td>10</td><td>|</td><td>按位或</td><td>表达式|表达式</td><td>左到右</td></tr>
<tr><td>11</td><td>&&</td><td>逻辑与</td><td>表达式&&表达式</td><td>左到右</td></tr>
<tr><td>12</td><td>||</td><td>逻辑或</td><td>表达式||表达式</td><td>左到右</td></tr>
<tr><td>13</td><td>?:</td><td>条件运算符</td><td>表达式1? 表达式2: 表达式3</td><td>右到左</td></tr>
<tr><td rowspan="11">14</td><td>=</td><td>赋值运算符</td><td>变量=表达式</td><td rowspan="11">右到左</td></tr>
<tr><td>/=</td><td>除后赋值</td><td>变量/=表达式</td></tr>
<tr><td>*=</td><td>乘后赋值</td><td>变量*=表达式</td></tr>
<tr><td>%=</td><td>取模后赋值</td><td>变量%=表达式</td></tr>
<tr><td>+=</td><td>加后赋值</td><td>变量+=表达式</td></tr>
<tr><td>-=</td><td>减后赋值</td><td>变量-=表达式</td></tr>
<tr><td><<=</td><td>左移后赋值</td><td>变量</td></tr>
<tr><td>>>=</td><td>右移后赋值</td><td>变量>>=表达式</td></tr>
<tr><td>&=</td><td>按位与后赋值</td><td>变量&=表达式</td></tr>
<tr><td>^=</td><td>按位异或后赋值</td><td>变量^=表达式</td></tr>
<tr><td>|=</td><td>按位或后赋值</td><td>变量|=表达式</td></tr>
<tr><td>15</td><td>,</td><td>逗号运算符</td><td>表达式,表达式,…</td><td>左到右</td></tr>
</table>


注意：

- 如果不确定运算符的优先级，可以加括号；
- 多用括号，让代码的可读性更好。

##  06.条件分支语句

###  1）if语句

if语句可以嵌套使用，实现多级（层）的条件判断（最多127层）。

语法：

```c
    if (表达式){
        // 表达式为真时执行的语句。
    } 
    else if (表达式) {
        // 表达式为真时执行的语句。
    }
    else{
        // 表达式为假时执行的语句。
    }
```

注意：

- if (表达式)之间的空格可以不写。
- 表达式必须使用括号。
- 表达式可以是具体的值。
- 表达式一般是关系运算和逻辑运算表达式，也可以是赋值运算或其它的表达式。
- **不要把if（变量名==值）写成if（变量名=值）。**
- 整个if语句可以没有else分支。
- if或else分支花括号内的代码如果只有一行，花括号可以不写；如果一行也没有，花括号一定要写；如果有多行，花括号一定要写，**如果不写，除了第一行，其它的代码将不是if语句的一部分。**
- **if (表达式)和else后不能加分号，因为分号表示空语句。**（C++用分号作为一条语句结束的标志。如果在C++程序中不小心多写了一个分号，那么该分号会被当成一条空语句。）

**if语句中的逻辑表达式采用括号、对齐、空格、换行有助于更清晰的表达复杂的逻辑表达式。**

###  2）三目运算符

三目运算也叫条件运算或三元运算，可以实现简单if语句的功能，但是书写更简洁。

` ``语法： 表达式一 ? 表达式二 : 表达式三`

先计算表达式一的值，如果为真，整个表达式的结果为表达式二的值，如果为假，整个表达式的结果为表达式三的值。

```c
int main() {
    int flag = 2;
    cout << ((flag > 2) ? 3:2) << endl;
    return 0;
}
```

三目运算表达式可以嵌套使用，但是，过于复杂的三目运算表达式不方便理解。

比如判断year是不是闰年，是则返回1，不是返回0。

```c++
int year;
year=(year%100==0)?(year%400==0?1:0):(year%4==0?1:0)
```

1. 普通年能被4整除且不能被100整除的为闰年。
1. 世纪年能被400整除的是闰年。
1. 对于数值很大的年份，这年如果能整除3200，并且能整除172800则是闰年。如172800年是闰年，86400年不是闰年。

###  3）switch

switch也是一种选择结构的语句，可以代替简单的多条件的if语句。

语法：

```c
switch (表达式){
   case 值一: 
     语句一; 
     break;
   case 值二: 
     语句二; 
     break;
......
  case 值n: 
     语句n; 
     break;
  default: 
	上述条件都不满足时执行的语句; 
}
```

注意：

- case后面必须是整数和字符，或者是结果为整数和字符的表达式，但不能使用变量。
- default不是必须的，当没有default时，如果全部的case匹配失败，那么就什么都不执行。
- 每个分支不要漏写break;语句。

示例：

```c
using namespace std;        // 指定缺省的命名空间。

int main() {
    int ca = 1;
    cout << "please input ca:"<< endl;
    cin >> ca;
    switch (ca) {
        case 1:
            cout << "this is 1\n";
            break;
        case 2:
            cout << "this is 2\n";
            break;
        default:
            cout << "this is default";
    }
    return 0;
}
```

##  07.循环

###  1）while循环

```c
while (表达式){
	语句块
}
```

先计算表达式的值，如果为真就执行语句块，执行完语句块后，回到循环首部再次计算表达式的值，如果为真又执行一次语句块……，这个过程会一直重复，直到表达式的值为假时不再执行语句块。

注意：

- 如果表达式的值永远为真，那么将进入死循环，所以在循环中应该有改变表达式的值的方法。
- 如果循环体中的语句块只有一行代码，大括号可以不书写。
- 有疑问先放一边，在以后的课程中，会介绍循环的各种使用方法。

```c
int main() {
    int ca = 1;
    cout << "please input ca:"<< endl;
    cin >> ca;
    while (ca < 10) {
        cout << "ca value is " << ca << endl;
        ca++;
    }
    return 0;
}
```

####  循环的跳转

break和continue两个关键字用于控制循环体中代码的执行流程。

break跳出（中止）当前循环语句。

continue回到当前循环语句的首部。

###  2）for循环

语法：

```c
for (语句一 ; 表达式 ; 语句二){
	语句块
}
```

1）循环开始的时候，先执行语句一，在整个循环过程中语句一只会被执行一次。

2）计算表达式的值，如果为真，就执行一次循环体中的语句块。

3）执行完语句块后，执行一次语句二。

4）重复第2）步和第3），直到表达式的值不为真才结束for循环。

注意：

- 不要纠结for循环与while循环的区别，它们本质上没有区别。
- for循环一般需要一个相当于计数器的变量，在语句一中对它进行初始化，在语句二中进行计数操作。
- 在for循环的语句一中，可以声明计数器变量。
- 在for循环中，语句一、表达式和语句二都可以为空，for (;;)等同于while (true)。
- continue和break两个关键字也可以用在for循环体中。

```c
int main() {
    int ca = 1;
    cout << "please input ca:"<< endl;
    cin >> ca;
    for (int i = 0; i < ca; ++i) {
        cout << "ca value is " << i << endl;
    }
    return 0;
}
```

### 3）do…while循环语句

语法：

```c
do{
	语句块
} while (表达式);
```

功能与while语句类似，不同的是：

- 进入循环时，先执行一次语句块，再计算表达式的值。
- 循环的首部书写在循环的尾部，(表达式)后面还有一个分号。

###  4）goto语句

goto语句也称为无条件转移语句。

goto的语法：goto 语句标号;

语句标号的语法：语句标号:

如果在程序中使用了goto，程序的流程将跳转到语句标号的位置，并执行它后面的代码。

其中语句标号是按[标识符](https://baike.baidu.com/item/%E6%A0%87%E8%AF%86%E7%AC%A6/7105638)规定书写的符号，放在某一语句行的前面，可以独占一行，标号后加[半角冒号](https://baike.baidu.com/item/%E5%8D%8A%E8%A7%92%E5%86%92%E5%8F%B7/1090543)。

语句标号用于标识语句的位置，与goto语句配合使用。

在实际开发中，goto语句容易造成程序流程的混乱，不方便理解，调试也更麻烦，不建议使用。